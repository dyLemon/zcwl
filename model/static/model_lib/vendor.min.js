
    THREE.OrbitControls=function(object,domElement){this.object=object;this.domElement=(domElement!==undefined)?domElement:document;this.enabled=true;this.target=new THREE.Vector3();this.minDistance=0;this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=-Infinity;this.maxAzimuthAngle=Infinity;this.enableDamping=false;this.dampingFactor=0.25;this.enableZoom=true;this.zoomSpeed=1;this.enableRotate=true;this.rotateSpeed=1;this.enablePan=true;this.panSpeed=1;this.screenSpacePanning=false;this.keyPanSpeed=7;this.autoRotate=false;this.autoRotateSpeed=2;this.enableKeys=true;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};this.mouseButtons={LEFT:THREE.MOUSE.LEFT,MIDDLE:THREE.MOUSE.MIDDLE,RIGHT:THREE.MOUSE.RIGHT};this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;this.ddOffPan=new THREE.Vector3(0,0,0);this.ddCusPos=new THREE.Vector3(this.target.x,this.target.y,this.target.z);this.ddSpherical=new THREE.Spherical(1,Math.PI/2,0);this.ddRadius=800;this.ddpoint=new THREE.Vector3(0,0,0);this.getPolarAngle=function(){return spherical.phi};this.getAzimuthalAngle=function(){return spherical.theta};this.saveState=function(){scope.target0.copy(scope.target);scope.position0.copy(scope.object.position);scope.zoom0=scope.object.zoom};this.reset=function(){scope.ddOffPan.set(0,0,0);scope.ddCusPos.set(0,0,0);scope.ddSpherical.set(1,Math.PI/2,0);scope.ddRadius=800;scope.target.copy(scope.target0);scope.object.position.copy(scope.position0);scope.object.zoom=scope.zoom0;scope.object.updateProjectionMatrix();scope.dispatchEvent(changeEvent);scope.update();state=STATE.NONE};this.update=function(){var offset=new THREE.Vector3();var lastPosition=new THREE.Vector3();var lastQuaternion=new THREE.Quaternion();return function update(){scope.ddOffPan.x+=panOffset.x;scope.ddOffPan.y+=panOffset.y;scope.ddSpherical.theta+=sphericalDelta.theta;scope.ddSpherical.phi+=sphericalDelta.phi;
    scope.ddSpherical.theta=Math.max(scope.minAzimuthAngle,Math.min(scope.maxAzimuthAngle,scope.ddSpherical.theta));scope.ddSpherical.phi=Math.max(scope.minPolarAngle,Math.min(scope.maxPolarAngle,scope.ddSpherical.phi));scope.ddSpherical.makeSafe();scope.ddRadius*=scale;scope.ddRadius=Math.max(scope.minDistance,Math.min(scope.maxDistance,scope.ddRadius));var ddrotpos=new THREE.Vector3();ddrotpos.setFromSpherical(scope.ddSpherical);var ddrotmat=new THREE.Matrix4().lookAt(ddrotpos,new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var ddcusmat=new THREE.Matrix4();ddcusmat.setPosition(scope.ddCusPos.clone().negate());ddcusmat.multiplyMatrices(ddcusmat.clone(),ddrotmat);var ddpanpos=new THREE.Vector3(scope.ddOffPan.x,scope.ddOffPan.y,0);var ddpos=new THREE.Vector3();ddpos.z=scope.ddRadius;ddpos.add(ddpanpos);ddpos.applyMatrix4(ddcusmat);var ddlook=new THREE.Vector3();ddlook.add(ddpanpos);ddlook.applyMatrix4(ddcusmat);scope.object.position.copy(ddpos);this.ddcenter=ddlook;scope.object.lookAt(ddlook);scope.ddpoint.x=0;scope.ddpoint.y=0;scope.ddpoint.z=100;scope.ddpoint.applyMatrix4(ddcusmat);if(scope.enableDamping===true){sphericalDelta.theta*=(1-scope.dampingFactor);sphericalDelta.phi*=(1-scope.dampingFactor);panOffset.multiplyScalar(1-scope.dampingFactor)}else{sphericalDelta.set(0,0,0);panOffset.set(0,0,0)}scale=1;if(zoomChanged||lastPosition.distanceToSquared(scope.object.position)>EPS||8*(1-lastQuaternion.dot(scope.object.quaternion))>EPS){scope.dispatchEvent(changeEvent);lastPosition.copy(scope.object.position);lastQuaternion.copy(scope.object.quaternion);zoomChanged=false;return true}return false}}();this.dispose=function(){scope.domElement.removeEventListener("contextmenu",onContextMenu,false);scope.domElement.removeEventListener("mousedown",onMouseDown,false);scope.domElement.removeEventListener("wheel",onMouseWheel,false);scope.domElement.removeEventListener("touchstart",onTouchStart,false);scope.domElement.removeEventListener("touchend",onTouchEnd,false);scope.domElement.removeEventListener("touchmove",onTouchMove,false);
    document.removeEventListener("mousemove",onMouseMove,false);document.removeEventListener("mouseup",onMouseUp,false);window.removeEventListener("keydown",onKeyDown,false)};var scope=this;var changeEvent={type:"change"};var startEvent={type:"start"};var endEvent={type:"end"};var STATE={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4};var state=STATE.NONE;var EPS=0.000001;var spherical=new THREE.Spherical();var sphericalDelta=new THREE.Spherical();var scale=1;var panOffset=new THREE.Vector3(0,0,0);var zoomChanged=false;var rotateStart=new THREE.Vector2();var rotateEnd=new THREE.Vector2();var rotateDelta=new THREE.Vector2();var panStart=new THREE.Vector2();var panEnd=new THREE.Vector2();var panDelta=new THREE.Vector2();var dollyStart=new THREE.Vector2();var dollyEnd=new THREE.Vector2();var dollyDelta=new THREE.Vector2();function getAutoRotationAngle(){return 2*Math.PI/60/60*scope.autoRotateSpeed}function getZoomScale(){return Math.pow(0.95,scope.zoomSpeed)}function rotateLeft(angle){sphericalDelta.theta-=angle}function rotateUp(angle){sphericalDelta.phi-=angle}var panLeft=function(){var v=new THREE.Vector3();return function panLeft(distance,objectMatrix){v.setFromMatrixColumn(objectMatrix,0);v.multiplyScalar(-distance);panOffset.add(v)}}();var panUp=function(){var v=new THREE.Vector3();return function panUp(distance,objectMatrix){if(scope.screenSpacePanning===true){v.setFromMatrixColumn(objectMatrix,1)}else{v.setFromMatrixColumn(objectMatrix,0);v.crossVectors(scope.object.up,v)}v.multiplyScalar(distance);panOffset.add(v)}}();var pan=function(){var offset=new THREE.Vector3();return function pan(deltaX,deltaY){var element=scope.domElement===document?scope.domElement.body:scope.domElement;if(scope.object.isPerspectiveCamera){panOffset.x=-deltaX;panOffset.y=deltaY}else{if(scope.object.isOrthographicCamera){panLeft(deltaX*(scope.object.right-scope.object.left)/scope.object.zoom/element.clientWidth,scope.object.matrix);panUp(deltaY*(scope.object.top-scope.object.bottom)/scope.object.zoom/element.clientHeight,scope.object.matrix)
    }else{console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.");scope.enablePan=false}}}}();function dollyIn(dollyScale){if(scope.object.isPerspectiveCamera){scale/=dollyScale}else{if(scope.object.isOrthographicCamera){scope.object.zoom=Math.max(scope.minZoom,Math.min(scope.maxZoom,scope.object.zoom*dollyScale));scope.object.updateProjectionMatrix();zoomChanged=true}else{console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.");scope.enableZoom=false}}}function dollyOut(dollyScale){if(scope.object.isPerspectiveCamera){scale*=dollyScale}else{if(scope.object.isOrthographicCamera){scope.object.zoom=Math.max(scope.minZoom,Math.min(scope.maxZoom,scope.object.zoom/dollyScale));scope.object.updateProjectionMatrix();zoomChanged=true}else{console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.");scope.enableZoom=false}}}function handleMouseDownRotate(event){rotateStart.set(event.clientX,event.clientY)}function handleMouseDownDolly(event){dollyStart.set(event.clientX,event.clientY)}function handleMouseDownPan(event){panStart.set(event.clientX,event.clientY)}function handleMouseMoveRotate(event){rotateEnd.set(event.clientX,event.clientY);rotateDelta.subVectors(rotateEnd,rotateStart).multiplyScalar(scope.rotateSpeed);var element=scope.domElement===document?scope.domElement.body:scope.domElement;rotateLeft(2*Math.PI*rotateDelta.x/element.clientHeight);rotateUp(2*Math.PI*rotateDelta.y/element.clientHeight);rotateStart.copy(rotateEnd);scope.update()}function handleMouseMoveDolly(event){dollyEnd.set(event.clientX,event.clientY);dollyDelta.subVectors(dollyEnd,dollyStart);if(dollyDelta.y>0){dollyIn(getZoomScale())}else{if(dollyDelta.y<0){dollyOut(getZoomScale())}}dollyStart.copy(dollyEnd);scope.update()}function handleMouseMovePan(event){panEnd.set(event.clientX,event.clientY);panDelta.subVectors(panEnd,panStart).multiplyScalar(scope.panSpeed);pan(panDelta.x,panDelta.y);
    panStart.copy(panEnd);scope.update()}function handleMouseUp(event){}function handleMouseWheel(event){if(event.deltaY<0){dollyOut(getZoomScale())}else{if(event.deltaY>0){dollyIn(getZoomScale())}}scope.update()}function handleKeyDown(event){switch(event.keyCode){case scope.keys.UP:pan(0,scope.keyPanSpeed);scope.update();break;case scope.keys.BOTTOM:pan(0,-scope.keyPanSpeed);scope.update();break;case scope.keys.LEFT:pan(scope.keyPanSpeed,0);scope.update();break;case scope.keys.RIGHT:pan(-scope.keyPanSpeed,0);scope.update();break}}function handleTouchStartRotate(event){rotateStart.set(event.touches[0].pageX,event.touches[0].pageY)}function handleTouchStartDollyPan(event){if(scope.enableZoom){var dx=event.touches[0].pageX-event.touches[1].pageX;var dy=event.touches[0].pageY-event.touches[1].pageY;var distance=Math.sqrt(dx*dx+dy*dy);dollyStart.set(0,distance)}if(scope.enablePan){var x=0.5*(event.touches[0].pageX+event.touches[1].pageX);var y=0.5*(event.touches[0].pageY+event.touches[1].pageY);panStart.set(x,y)}}function handleTouchMoveRotate(event){rotateEnd.set(event.touches[0].pageX,event.touches[0].pageY);rotateDelta.subVectors(rotateEnd,rotateStart).multiplyScalar(scope.rotateSpeed);var element=scope.domElement===document?scope.domElement.body:scope.domElement;rotateLeft(2*Math.PI*rotateDelta.x/element.clientHeight);rotateUp(2*Math.PI*rotateDelta.y/element.clientHeight);rotateStart.copy(rotateEnd);scope.update()}function handleTouchMoveDollyPan(event){if(scope.enableZoom){var dx=event.touches[0].pageX-event.touches[1].pageX;var dy=event.touches[0].pageY-event.touches[1].pageY;var distance=Math.sqrt(dx*dx+dy*dy);dollyEnd.set(0,distance);dollyDelta.set(0,Math.pow(dollyEnd.y/dollyStart.y,scope.zoomSpeed));dollyIn(dollyDelta.y);dollyStart.copy(dollyEnd)}if(scope.enablePan){var x=0.5*(event.touches[0].pageX+event.touches[1].pageX);var y=0.5*(event.touches[0].pageY+event.touches[1].pageY);panEnd.set(x,y);panDelta.subVectors(panEnd,panStart).multiplyScalar(scope.panSpeed);pan(panDelta.x,panDelta.y);
    panStart.copy(panEnd)}scope.update()}function handleTouchEnd(event){}function onMouseDown(event){if(scope.enabled===false){return}event.preventDefault();switch(event.button){case scope.mouseButtons.LEFT:if(event.ctrlKey||event.metaKey){if(scope.enablePan===false){return}handleMouseDownPan(event);state=STATE.PAN}else{if(scope.enableRotate===false){return}handleMouseDownRotate(event);state=STATE.ROTATE}break;case scope.mouseButtons.MIDDLE:if(scope.enableZoom===false){return}handleMouseDownDolly(event);state=STATE.DOLLY;break;case scope.mouseButtons.RIGHT:if(scope.enablePan===false){return}handleMouseDownPan(event);state=STATE.PAN;break}if(state!==STATE.NONE){document.addEventListener("mousemove",onMouseMove,false);document.addEventListener("mouseup",onMouseUp,false);scope.dispatchEvent(startEvent)}}function onMouseMove(event){if(scope.enabled===false){return}event.preventDefault();switch(state){case STATE.ROTATE:if(scope.enableRotate===false){return}handleMouseMoveRotate(event);break;case STATE.DOLLY:if(scope.enableZoom===false){return}handleMouseMoveDolly(event);break;case STATE.PAN:if(scope.enablePan===false){return}handleMouseMovePan(event);break}}function onMouseUp(event){if(scope.enabled===false){return}handleMouseUp(event);document.removeEventListener("mousemove",onMouseMove,false);document.removeEventListener("mouseup",onMouseUp,false);scope.dispatchEvent(endEvent);state=STATE.NONE}function onMouseWheel(event){if(scope.enabled===false||scope.enableZoom===false||(state!==STATE.NONE&&state!==STATE.ROTATE)){return}event.preventDefault();event.stopPropagation();scope.dispatchEvent(startEvent);handleMouseWheel(event);scope.dispatchEvent(endEvent)}function onKeyDown(event){if(scope.enabled===false||scope.enableKeys===false||scope.enablePan===false){return}handleKeyDown(event)}function onTouchStart(event){if(scope.enabled===false){return}event.preventDefault();switch(event.touches.length){case 1:if(scope.enableRotate===false){return}handleTouchStartRotate(event);state=STATE.TOUCH_ROTATE;
    break;case 2:if(scope.enableZoom===false&&scope.enablePan===false){return}handleTouchStartDollyPan(event);state=STATE.TOUCH_DOLLY_PAN;break;default:state=STATE.NONE}if(state!==STATE.NONE){scope.dispatchEvent(startEvent)}}function onTouchMove(event){if(scope.enabled===false){return}event.preventDefault();event.stopPropagation();switch(event.touches.length){case 1:if(scope.enableRotate===false){return}if(state!==STATE.TOUCH_ROTATE){return}handleTouchMoveRotate(event);break;case 2:if(scope.enableZoom===false&&scope.enablePan===false){return}if(state!==STATE.TOUCH_DOLLY_PAN){return}handleTouchMoveDollyPan(event);break;default:state=STATE.NONE}}function onTouchEnd(event){if(scope.enabled===false){return}handleTouchEnd(event);scope.dispatchEvent(endEvent);state=STATE.NONE}function onContextMenu(event){if(scope.enabled===false){return}event.preventDefault()}scope.domElement.addEventListener("contextmenu",onContextMenu,false);scope.domElement.addEventListener("mousedown",onMouseDown,false);scope.domElement.addEventListener("wheel",onMouseWheel,false);scope.domElement.addEventListener("touchstart",onTouchStart,false);scope.domElement.addEventListener("touchend",onTouchEnd,false);scope.domElement.addEventListener("touchmove",onTouchMove,false);window.addEventListener("keydown",onKeyDown,false);this.update()};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);THREE.OrbitControls.prototype.constructor=THREE.OrbitControls;Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){console.warn("THREE.OrbitControls: .center has been renamed to .target");return this.target}},noZoom:{get:function(){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");return !this.enableZoom},set:function(value){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");this.enableZoom=!value}},noRotate:{get:function(){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");
    return !this.enableRotate},set:function(value){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");this.enableRotate=!value}},noPan:{get:function(){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.");return !this.enablePan},set:function(value){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.");this.enablePan=!value}},noKeys:{get:function(){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");return !this.enableKeys},set:function(value){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");this.enableKeys=!value}},staticMoving:{get:function(){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");return !this.enableDamping},set:function(value){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");this.enableDamping=!value}},dynamicDampingFactor:{get:function(){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");return this.dampingFactor},set:function(value){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");this.dampingFactor=value}}});Object.assign(THREE.OrbitControls.prototype,{add:function(){return this.ddpoint},});
    
    var Detector={canvas:!!window.CanvasRenderingContext2D,webgl:(function(){try{var canvas=document.createElement("canvas");return !!(window.WebGLRenderingContext&&(canvas.getContext("webgl")||canvas.getContext("experimental-webgl")))}catch(e){return false}})(),webgl2:(function(){try{var canvas=document.createElement("canvas");return !!(window.WebGL2RenderingContext&&(canvas.getContext("webgl2")))}catch(e){return false}})(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var element=document.createElement("div");
    element.id="webgl-error-message";element.style.fontFamily="monospace";element.style.fontSize="13px";element.style.fontWeight="normal";element.style.textAlign="center";element.style.background="#fff";element.style.color="#000";element.style.padding="1.5em";element.style.width="400px";element.style.margin="5em auto 0";if(!this.webgl){element.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")}return element},addGetWebGLMessage:function(parameters){var parent,id,element;parameters=parameters||{};parent=parameters.parent!==undefined?parameters.parent:document.body;id=parameters.id!==undefined?parameters.id:"oldie";element=Detector.getWebGLErrorMessage();element.id=id;parent.appendChild(element)}};if(typeof module==="object"){module.exports=Detector}THREE.STLLoader=function(manager){this.manager=(manager!==undefined)?manager:THREE.DefaultLoadingManager};THREE.STLLoader.prototype={constructor:THREE.STLLoader,load:function(url,onLoad,onProgress,onError){var scope=this;var loader=new THREE.FileLoader(scope.manager);loader.setResponseType("arraybuffer");loader.load(url,function(text){try{onLoad(scope.parse(text))}catch(exception){if(onError){onError(exception)}}},onProgress,onError)},parse:function(data){function isBinary(data){var expect,face_size,n_faces,reader;reader=new DataView(data);face_size=(32/8*3)+((32/8*3)*3)+(16/8);n_faces=reader.getUint32(80,true);expect=80+(32/8)+(n_faces*face_size);if(expect===reader.byteLength){return true}var solid=[115,111,108,105,100];for(var off=0;off<5;off++){if(matchDataViewAt(solid,reader,off)){return false
    }}return true}function matchDataViewAt(query,reader,offset){for(var i=0,il=query.length;i<il;i++){if(query[i]!==reader.getUint8(offset+i,false)){return false}}return true}function parseBinary(data){var reader=new DataView(data);var faces=reader.getUint32(80,true);var r,g,b,hasColors=false,colors;var defaultR,defaultG,defaultB,alpha;for(var index=0;index<80-10;index++){if((reader.getUint32(index,false)==1129270351)&&(reader.getUint8(index+4)==82)&&(reader.getUint8(index+5)==61)){hasColors=true;colors=[];defaultR=reader.getUint8(index+6)/255;defaultG=reader.getUint8(index+7)/255;defaultB=reader.getUint8(index+8)/255;alpha=reader.getUint8(index+9)/255}}var dataOffset=84;var faceLength=12*4+2;var geometry=new THREE.BufferGeometry();var vertices=[];var normals=[];for(var face=0;face<faces;face++){var start=dataOffset+face*faceLength;var normalX=reader.getFloat32(start,true);var normalY=reader.getFloat32(start+4,true);var normalZ=reader.getFloat32(start+8,true);if(hasColors){var packedColor=reader.getUint16(start+48,true);if((packedColor&32768)===0){r=(packedColor&31)/31;g=((packedColor>>5)&31)/31;b=((packedColor>>10)&31)/31}else{r=defaultR;g=defaultG;b=defaultB}}for(var i=1;i<=3;i++){var vertexstart=start+i*12;vertices.push(reader.getFloat32(vertexstart,true));vertices.push(reader.getFloat32(vertexstart+4,true));vertices.push(reader.getFloat32(vertexstart+8,true));normals.push(normalX,normalY,normalZ);if(hasColors){colors.push(r,g,b)}}}geometry.addAttribute("position",new THREE.BufferAttribute(new Float32Array(vertices),3));geometry.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(normals),3));if(hasColors){geometry.addAttribute("color",new THREE.BufferAttribute(new Float32Array(colors),3));geometry.hasColors=true;geometry.alpha=alpha}return geometry}function parseASCII(data){var geometry=new THREE.BufferGeometry();var patternFace=/facet([\s\S]*?)endfacet/g;var faceCounter=0;var patternFloat=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source;var patternVertex=new RegExp("vertex"+patternFloat+patternFloat+patternFloat,"g");
    var patternNormal=new RegExp("normal"+patternFloat+patternFloat+patternFloat,"g");var vertices=[];var normals=[];var normal=new THREE.Vector3();var result;while((result=patternFace.exec(data))!==null){var vertexCountPerFace=0;var normalCountPerFace=0;var text=result[0];while((result=patternNormal.exec(text))!==null){normal.x=parseFloat(result[1]);normal.y=parseFloat(result[2]);normal.z=parseFloat(result[3]);normalCountPerFace++}while((result=patternVertex.exec(text))!==null){vertices.push(parseFloat(result[1]),parseFloat(result[2]),parseFloat(result[3]));normals.push(normal.x,normal.y,normal.z);vertexCountPerFace++}if(normalCountPerFace!==1){console.error("THREE.STLLoader: Something isn't right with the normal of face number "+faceCounter)}if(vertexCountPerFace!==3){console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+faceCounter)}faceCounter++}geometry.addAttribute("position",new THREE.Float32BufferAttribute(vertices,3));geometry.addAttribute("normal",new THREE.Float32BufferAttribute(normals,3));return geometry}function ensureString(buffer){if(typeof buffer!=="string"){return THREE.LoaderUtils.decodeText(new Uint8Array(buffer))}return buffer}function ensureBinary(buffer){if(typeof buffer==="string"){var array_buffer=new Uint8Array(buffer.length);for(var i=0;i<buffer.length;i++){array_buffer[i]=buffer.charCodeAt(i)&255}return array_buffer.buffer||array_buffer}else{return buffer}}function UnZip(buffer){var unzip_buffer=new Uint8Array(buffer.length);unzip_buffer=pako.inflate(buffer);return unzip_buffer.buffer}var unzipData=UnZip(data);var binData=ensureBinary(unzipData);return isBinary(binData)?parseBinary(binData):parseASCII(ensureString(data))},};
    THREE.OBJLoader=(function(){var object_pattern=/^[og]\s*(.+)?/;var material_library_pattern=/^mtllib /;var material_use_pattern=/^usemtl /;function ParserState(){var state={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(name,fromDeclaration){if(this.object&&this.object.fromDeclaration===false){this.object.name=name;this.object.fromDeclaration=(fromDeclaration!==false);return}var previousMaterial=(this.object&&typeof this.object.currentMaterial==="function"?this.object.currentMaterial():undefined);if(this.object&&typeof this.object._finalize==="function"){this.object._finalize(true)}this.object={name:name||"",fromDeclaration:(fromDeclaration!==false),geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:true,startMaterial:function(name,libraries){var previous=this._finalize(false);if(previous&&(previous.inherited||previous.groupCount<=0)){this.materials.splice(previous.index,1)}var material={index:this.materials.length,name:name||"",mtllib:(Array.isArray(libraries)&&libraries.length>0?libraries[libraries.length-1]:""),smooth:(previous!==undefined?previous.smooth:this.smooth),groupStart:(previous!==undefined?previous.groupEnd:0),groupEnd:-1,groupCount:-1,inherited:false,clone:function(index){var cloned={index:(typeof index==="number"?index:this.index),name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:false};cloned.clone=this.clone.bind(cloned);return cloned}};this.materials.push(material);return material},currentMaterial:function(){if(this.materials.length>0){return this.materials[this.materials.length-1]}return undefined},_finalize:function(end){var lastMultiMaterial=this.currentMaterial();if(lastMultiMaterial&&lastMultiMaterial.groupEnd===-1){lastMultiMaterial.groupEnd=this.geometry.vertices.length/3;lastMultiMaterial.groupCount=lastMultiMaterial.groupEnd-lastMultiMaterial.groupStart;lastMultiMaterial.inherited=false}if(end&&this.materials.length>1){for(var mi=this.materials.length-1;
    mi>=0;mi--){if(this.materials[mi].groupCount<=0){this.materials.splice(mi,1)}}}if(end&&this.materials.length===0){this.materials.push({name:"",smooth:this.smooth})}return lastMultiMaterial}};if(previousMaterial&&previousMaterial.name&&typeof previousMaterial.clone==="function"){var declared=previousMaterial.clone(0);declared.inherited=true;this.object.materials.push(declared)}this.objects.push(this.object)},finalize:function(){if(this.object&&typeof this.object._finalize==="function"){this.object._finalize(true)}},parseVertexIndex:function(value,len){var index=parseInt(value,10);return(index>=0?index-1:index+len/3)*3},parseNormalIndex:function(value,len){var index=parseInt(value,10);return(index>=0?index-1:index+len/3)*3},parseUVIndex:function(value,len){var index=parseInt(value,10);return(index>=0?index-1:index+len/2)*2},addVertex:function(a,b,c){var src=this.vertices;var dst=this.object.geometry.vertices;dst.push(src[a+0],src[a+1],src[a+2]);dst.push(src[b+0],src[b+1],src[b+2]);dst.push(src[c+0],src[c+1],src[c+2])},addVertexPoint:function(a){var src=this.vertices;var dst=this.object.geometry.vertices;dst.push(src[a+0],src[a+1],src[a+2])},addVertexLine:function(a){var src=this.vertices;var dst=this.object.geometry.vertices;dst.push(src[a+0],src[a+1],src[a+2])},addNormal:function(a,b,c){var src=this.normals;var dst=this.object.geometry.normals;dst.push(src[a+0],src[a+1],src[a+2]);dst.push(src[b+0],src[b+1],src[b+2]);dst.push(src[c+0],src[c+1],src[c+2])},addColor:function(a,b,c){var src=this.colors;var dst=this.object.geometry.colors;dst.push(src[a+0],src[a+1],src[a+2]);dst.push(src[b+0],src[b+1],src[b+2]);dst.push(src[c+0],src[c+1],src[c+2])},addUV:function(a,b,c){var src=this.uvs;var dst=this.object.geometry.uvs;dst.push(src[a+0],src[a+1]);dst.push(src[b+0],src[b+1]);dst.push(src[c+0],src[c+1])},addUVLine:function(a){var src=this.uvs;var dst=this.object.geometry.uvs;dst.push(src[a+0],src[a+1])},addFace:function(a,b,c,ua,ub,uc,na,nb,nc){var vLen=this.vertices.length;var ia=this.parseVertexIndex(a,vLen);
    var ib=this.parseVertexIndex(b,vLen);var ic=this.parseVertexIndex(c,vLen);this.addVertex(ia,ib,ic);if(this.colors.length>0){this.addColor(ia,ib,ic)}if(ua!==undefined&&ua!==""){var uvLen=this.uvs.length;ia=this.parseUVIndex(ua,uvLen);ib=this.parseUVIndex(ub,uvLen);ic=this.parseUVIndex(uc,uvLen);this.addUV(ia,ib,ic)}if(na!==undefined&&na!==""){var nLen=this.normals.length;ia=this.parseNormalIndex(na,nLen);ib=na===nb?ia:this.parseNormalIndex(nb,nLen);ic=na===nc?ia:this.parseNormalIndex(nc,nLen);this.addNormal(ia,ib,ic)}},addPointGeometry:function(vertices){this.object.geometry.type="Points";var vLen=this.vertices.length;for(var vi=0,l=vertices.length;vi<l;vi++){this.addVertexPoint(this.parseVertexIndex(vertices[vi],vLen))}},addLineGeometry:function(vertices,uvs){this.object.geometry.type="Line";var vLen=this.vertices.length;var uvLen=this.uvs.length;for(var vi=0,l=vertices.length;vi<l;vi++){this.addVertexLine(this.parseVertexIndex(vertices[vi],vLen))}for(var uvi=0,l=uvs.length;uvi<l;uvi++){this.addUVLine(this.parseUVIndex(uvs[uvi],uvLen))}}};state.startObject("",false);return state}function OBJLoader(manager){THREE.Loader.call(this,manager);this.materials=null}OBJLoader.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:OBJLoader,load:function(url,onLoad,onProgress,onError){var scope=this;var loader=new THREE.FileLoader(scope.manager);loader.setPath(this.path);loader.setResponseType("arraybuffer");loader.load(url,function(text){onLoad(scope.parse(text))},onProgress,onError)},setMaterials:function(materials){this.materials=materials;return this},parse:function(data){function UnZip(buffer){var unzip_buffer=new Uint8Array(buffer.length);unzip_buffer=pako.inflate(buffer);return unzip_buffer.buffer}function ensureString(buffer){if(typeof buffer!=="string"){return THREE.LoaderUtils.decodeText(new Uint8Array(buffer))}return buffer}var unzipData=UnZip(data);var text=ensureString(unzipData);var state=new ParserState();if(text.indexOf("\r\n")!==-1){text=text.replace(/\r\n/g,"\n")
    }if(text.indexOf("\\\n")!==-1){text=text.replace(/\\\n/g,"")}var lines=text.split("\n");var line="",lineFirstChar="";var lineLength=0;var result=[];var trimLeft=(typeof"".trimLeft==="function");for(var i=0,l=lines.length;i<l;i++){line=lines[i];line=trimLeft?line.trimLeft():line.trim();lineLength=line.length;if(lineLength===0){continue}lineFirstChar=line.charAt(0);if(lineFirstChar==="#"){continue}if(lineFirstChar==="v"){var data=line.split(/\s+/);switch(data[0]){case"v":state.vertices.push(parseFloat(data[1]),parseFloat(data[2]),parseFloat(data[3]));if(data.length>=7){state.colors.push(parseFloat(data[4]),parseFloat(data[5]),parseFloat(data[6]))}break;case"vn":state.normals.push(parseFloat(data[1]),parseFloat(data[2]),parseFloat(data[3]));break;case"vt":state.uvs.push(parseFloat(data[1]),parseFloat(data[2]));break}}else{if(lineFirstChar==="f"){var lineData=line.substr(1).trim();var vertexData=lineData.split(/\s+/);var faceVertices=[];for(var j=0,jl=vertexData.length;j<jl;j++){var vertex=vertexData[j];if(vertex.length>0){var vertexParts=vertex.split("/");faceVertices.push(vertexParts)}}var v1=faceVertices[0];for(var j=1,jl=faceVertices.length-1;j<jl;j++){var v2=faceVertices[j];var v3=faceVertices[j+1];state.addFace(v1[0],v2[0],v3[0],v1[1],v2[1],v3[1],v1[2],v2[2],v3[2])}}else{if(lineFirstChar==="l"){var lineParts=line.substring(1).trim().split(" ");var lineVertices=[],lineUVs=[];if(line.indexOf("/")===-1){lineVertices=lineParts}else{for(var li=0,llen=lineParts.length;li<llen;li++){var parts=lineParts[li].split("/");if(parts[0]!==""){lineVertices.push(parts[0])}if(parts[1]!==""){lineUVs.push(parts[1])}}}state.addLineGeometry(lineVertices,lineUVs)}else{if(lineFirstChar==="p"){var lineData=line.substr(1).trim();var pointData=lineData.split(" ");state.addPointGeometry(pointData)}else{if((result=object_pattern.exec(line))!==null){var name=(" "+result[0].substr(1).trim()).substr(1);state.startObject(name)}else{if(material_use_pattern.test(line)){state.object.startMaterial(line.substring(7).trim(),state.materialLibraries)
    }else{if(material_library_pattern.test(line)){state.materialLibraries.push(line.substring(7).trim())}else{if(lineFirstChar==="s"){result=line.split(" ");if(result.length>1){var value=result[1].trim().toLowerCase();state.object.smooth=(value!=="0"&&value!=="off")}else{state.object.smooth=true}var material=state.object.currentMaterial();if(material){material.smooth=state.object.smooth}}else{if(line==="\0"){continue}throw new Error('THREE.OBJLoader: Unexpected line: "'+line+'"')}}}}}}}}}state.finalize();var container=new THREE.Group();container.materialLibraries=[].concat(state.materialLibraries);for(var i=0,l=state.objects.length;i<l;i++){var object=state.objects[i];var geometry=object.geometry;var materials=object.materials;var isLine=(geometry.type==="Line");var isPoints=(geometry.type==="Points");var hasVertexColors=false;if(geometry.vertices.length===0){continue}var buffergeometry=new THREE.BufferGeometry();buffergeometry.addAttribute("position",new THREE.Float32BufferAttribute(geometry.vertices,3));if(geometry.normals.length>0){buffergeometry.addAttribute("normal",new THREE.Float32BufferAttribute(geometry.normals,3))}else{buffergeometry.computeVertexNormals()}if(geometry.colors.length>0){hasVertexColors=true;buffergeometry.addAttribute("color",new THREE.Float32BufferAttribute(geometry.colors,3))}if(geometry.uvs.length>0){buffergeometry.addAttribute("uv",new THREE.Float32BufferAttribute(geometry.uvs,2))}var createdMaterials=[];for(var mi=0,miLen=materials.length;mi<miLen;mi++){var sourceMaterial=materials[mi];var material=undefined;if(this.materials!==null){material=this.materials.create(sourceMaterial.name);if(isLine&&material&&!(material instanceof THREE.LineBasicMaterial)){var materialLine=new THREE.LineBasicMaterial();THREE.Material.prototype.copy.call(materialLine,material);materialLine.color.copy(material.color);material=materialLine}else{if(isPoints&&material&&!(material instanceof THREE.PointsMaterial)){var materialPoints=new THREE.PointsMaterial({size:10,sizeAttenuation:false});
    THREE.Material.prototype.copy.call(materialPoints,material);materialPoints.color.copy(material.color);materialPoints.map=material.map;material=materialPoints}}}if(!material){if(isLine){material=new THREE.LineBasicMaterial()}else{if(isPoints){material=new THREE.PointsMaterial({size:1,sizeAttenuation:false})}else{material=new THREE.MeshPhongMaterial()}}material.name=sourceMaterial.name}material.flatShading=sourceMaterial.smooth?false:true;material.vertexColors=hasVertexColors?THREE.VertexColors:THREE.NoColors;createdMaterials.push(material)}var mesh;if(createdMaterials.length>1){for(var mi=0,miLen=materials.length;mi<miLen;mi++){var sourceMaterial=materials[mi];buffergeometry.addGroup(sourceMaterial.groupStart,sourceMaterial.groupCount,mi)}if(isLine){mesh=new THREE.LineSegments(buffergeometry,createdMaterials)}else{if(isPoints){mesh=new THREE.Points(buffergeometry,createdMaterials)}else{mesh=new THREE.Mesh(buffergeometry,createdMaterials)}}}else{if(isLine){mesh=new THREE.LineSegments(buffergeometry,createdMaterials[0])}else{if(isPoints){mesh=new THREE.Points(buffergeometry,createdMaterials[0])}else{mesh=new THREE.Mesh(buffergeometry,createdMaterials[0])}}}mesh.name=object.name;container.add(mesh)}return container}});return OBJLoader})();
    THREE.STLLoader=function(manager){THREE.Loader.call(this,manager)};THREE.STLLoader.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:THREE.STLLoader,load:function(url,onLoad,onProgress,onError){var scope=this;var loader=new THREE.FileLoader(scope.manager);loader.setPath(scope.path);loader.setResponseType("arraybuffer");loader.load(url,function(text){try{onLoad(scope.parse(text))}catch(exception){if(onError){onError(exception)}}},onProgress,onError)},parse:function(data){function isBinary(data){var expect,face_size,n_faces,reader;reader=new DataView(data);face_size=(32/8*3)+((32/8*3)*3)+(16/8);n_faces=reader.getUint32(80,true);expect=80+(32/8)+(n_faces*face_size);if(expect===reader.byteLength){return true}var solid=[115,111,108,105,100];for(var off=0;off<5;off++){if(matchDataViewAt(solid,reader,off)){return false}}return true}function matchDataViewAt(query,reader,offset){for(var i=0,il=query.length;i<il;i++){if(query[i]!==reader.getUint8(offset+i,false)){return false}}return true}function parseBinary(data){var reader=new DataView(data);var faces=reader.getUint32(80,true);var r,g,b,hasColors=false,colors;var defaultR,defaultG,defaultB,alpha;for(var index=0;index<80-10;index++){if((reader.getUint32(index,false)==1129270351)&&(reader.getUint8(index+4)==82)&&(reader.getUint8(index+5)==61)){hasColors=true;colors=new Float32Array(faces*3*3);defaultR=reader.getUint8(index+6)/255;defaultG=reader.getUint8(index+7)/255;defaultB=reader.getUint8(index+8)/255;alpha=reader.getUint8(index+9)/255}}var dataOffset=84;var faceLength=12*4+2;var geometry=new THREE.BufferGeometry();var vertices=new Float32Array(faces*3*3);var normals=new Float32Array(faces*3*3);for(var face=0;face<faces;face++){var start=dataOffset+face*faceLength;var normalX=reader.getFloat32(start,true);var normalY=reader.getFloat32(start+4,true);var normalZ=reader.getFloat32(start+8,true);if(hasColors){var packedColor=reader.getUint16(start+48,true);if((packedColor&32768)===0){r=(packedColor&31)/31;
    g=((packedColor>>5)&31)/31;b=((packedColor>>10)&31)/31}else{r=defaultR;g=defaultG;b=defaultB}}for(var i=1;i<=3;i++){var vertexstart=start+i*12;var componentIdx=(face*3*3)+((i-1)*3);vertices[componentIdx]=reader.getFloat32(vertexstart,true);vertices[componentIdx+1]=reader.getFloat32(vertexstart+4,true);vertices[componentIdx+2]=reader.getFloat32(vertexstart+8,true);normals[componentIdx]=normalX;normals[componentIdx+1]=normalY;normals[componentIdx+2]=normalZ;if(hasColors){colors[componentIdx]=r;colors[componentIdx+1]=g;colors[componentIdx+2]=b}}}geometry.addAttribute("position",new THREE.BufferAttribute(vertices,3));geometry.addAttribute("normal",new THREE.BufferAttribute(normals,3));if(hasColors){geometry.addAttribute("color",new THREE.BufferAttribute(colors,3));geometry.hasColors=true;geometry.alpha=alpha}return geometry}function parseASCII(data){var geometry=new THREE.BufferGeometry();var patternSolid=/solid([\s\S]*?)endsolid/g;var patternFace=/facet([\s\S]*?)endfacet/g;var faceCounter=0;var patternFloat=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source;var patternVertex=new RegExp("vertex"+patternFloat+patternFloat+patternFloat,"g");var patternNormal=new RegExp("normal"+patternFloat+patternFloat+patternFloat,"g");var vertices=[];var normals=[];var normal=new THREE.Vector3();var result;var groupVertexes=[];var groupCount=0;var startVertex=0;var endVertex=0;while((result=patternSolid.exec(data))!==null){startVertex=endVertex;var solid=result[0];while((result=patternFace.exec(solid))!==null){var vertexCountPerFace=0;var normalCountPerFace=0;var text=result[0];while((result=patternNormal.exec(text))!==null){normal.x=parseFloat(result[1]);normal.y=parseFloat(result[2]);normal.z=parseFloat(result[3]);normalCountPerFace++}while((result=patternVertex.exec(text))!==null){vertices.push(parseFloat(result[1]),parseFloat(result[2]),parseFloat(result[3]));normals.push(normal.x,normal.y,normal.z);vertexCountPerFace++;endVertex++}if(normalCountPerFace!==1){console.error("THREE.STLLoader: Something isn't right with the normal of face number "+faceCounter)
    }if(vertexCountPerFace!==3){console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+faceCounter)}faceCounter++}groupVertexes.push({startVertex:startVertex,endVertex:endVertex});groupCount++}geometry.addAttribute("position",new THREE.Float32BufferAttribute(vertices,3));geometry.addAttribute("normal",new THREE.Float32BufferAttribute(normals,3));if(groupCount>0){for(var i=0;i<groupVertexes.length;i++){geometry.addGroup(groupVertexes[i].startVertex,groupVertexes[i].endVertex,i)}}return geometry}function ensureString(buffer){if(typeof buffer!=="string"){return THREE.LoaderUtils.decodeText(new Uint8Array(buffer))}return buffer}function ensureBinary(buffer){if(typeof buffer==="string"){var array_buffer=new Uint8Array(buffer.length);for(var i=0;i<buffer.length;i++){array_buffer[i]=buffer.charCodeAt(i)&255}return array_buffer.buffer||array_buffer}else{return buffer}}function UnZip(buffer){var unzip_buffer=new Uint8Array(buffer.length);unzip_buffer=pako.inflate(buffer);return unzip_buffer.buffer}var unzipData=UnZip(data);var binData=ensureBinary(unzipData);return isBinary(binData)?parseBinary(binData):parseASCII(ensureString(unzipData))}});
    